<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Scheduler : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Scheduler</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/efueyo/scheduler">View on GitHub</a>

          <h1 id="project_title">Scheduler</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/efueyo/scheduler/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/efueyo/scheduler/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="scheduler-module" class="anchor" href="#scheduler-module"><span class="octicon octicon-link"></span></a>Scheduler Module</h1>

<p>It has 3 porpuses:</p>

<ol>
<li>Start using github and contribute to open source.</li>
<li>Learn how to publish something to npm. (TODO)</li>
<li>Become something usefull?. (TODO)</li>
</ol><p>Essentially it's a queue where you can push functions to be processed
at a certain interval. Actually the functions are  not called periodically
but you can enqueue many functions and they will be executed in order at a
certain rate.</p>

<h2>
<a name="usage" class="anchor" href="#usage"><span class="octicon octicon-link"></span></a>Usage:</h2>

<div class="highlight highlight-javascript"><pre>  <span class="nx">scheduler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scheduler</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="c1">//call functions every 1sec</span>
  <span class="nx">scheduler</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
  <span class="p">});</span>
  <span class="nx">scheduler</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>
  <span class="p">});</span> 
  <span class="c1">//Now with arguments</span>
  <span class="nx">scheduler</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">([</span>
   <span class="kd">function</span><span class="p">(</span><span class="nx">arg1</span><span class="p">,</span><span class="nx">arg2</span><span class="p">){</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'First argument is:'</span> <span class="o">+</span> <span class="nx">arg1</span><span class="p">);</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Second argument is:'</span> <span class="o">+</span> <span class="nx">arg2</span><span class="p">);</span>
   <span class="p">},</span>
   <span class="mi">2</span><span class="p">,</span><span class="s1">'hi!'</span><span class="p">])</span>
  <span class="nx">scheduler</span><span class="p">.</span><span class="nx">start</span><span class="p">()</span>
</pre></div>

<h2>
<a name="use-cases" class="anchor" href="#use-cases"><span class="octicon octicon-link"></span></a>Use cases</h2>

<h4>
<a name="external-api-rate-limit" class="anchor" href="#external-api-rate-limit"><span class="octicon octicon-link"></span></a>External API Rate Limit</h4>

<p>Imagine you must use a certain API for many things, but the limit is imposed
to the whole API, not just per endpoint.</p>

<ul>
<li>Rate limit is 1 call/sec</li>
</ul><div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">scheduler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scheduler</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="c1">// 1 call each 1000ms</span>
<span class="kd">var</span> <span class="nx">api_manager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">RestrictedApiManager</span><span class="p">({</span><span class="nx">user</span><span class="o">:</span><span class="s1">'me'</span><span class="p">,</span><span class="nx">pass</span><span class="o">:</span><span class="s1">'secret'</span><span class="p">);</span>

<span class="c1">//This could be rate limited</span>
<span class="nx">api_manager</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Data is"</span><span class="o">:</span> <span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">api_manager</span><span class="p">.</span><span class="nx">getMoreData</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data2</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Data is"</span><span class="o">:</span> <span class="nx">data2</span><span class="p">);</span>
<span class="p">});</span>
<span class="nx">api_manager</span><span class="p">.</span><span class="nx">getOtherData</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data3</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Data is"</span><span class="o">:</span> <span class="nx">data3</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">//This won't be rate limited but it is awful</span>
<span class="kd">var</span> <span class="nx">rate_limit_delay</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
<span class="nx">api_manager</span><span class="p">.</span><span class="nx">getData</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Data is"</span><span class="o">:</span> <span class="nx">data</span><span class="p">);</span>
  <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">api_manager</span><span class="p">.</span><span class="nx">getMoreData</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data2</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Data is"</span><span class="o">:</span> <span class="nx">data2</span><span class="p">);</span>
      <span class="nx">setTimeout</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">api_manager</span><span class="p">.</span><span class="nx">getOtherData</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data3</span><span class="p">){</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Data is"</span><span class="o">:</span> <span class="nx">data3</span><span class="p">);</span>
        <span class="p">});</span> <span class="c1">//getOtherData</span>
      <span class="p">},</span><span class="nx">rate_limit_delay</span><span class="p">);</span>
    <span class="p">});</span> <span class="c1">//getMoreData</span>
  <span class="p">},</span><span class="nx">rate_limit_delay</span><span class="p">);</span>
<span class="p">});</span> <span class="c1">//getData</span>

<span class="c1">//This looks better</span>
<span class="kd">var</span> <span class="nx">scheduler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Scheduler</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span> <span class="c1">// 1 call per 1000ms</span>
<span class="nx">scheduler</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
<span class="nx">printData</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Data is:"</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>

<span class="p">}</span>
<span class="nx">scheduler</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">(</span><span class="nx">api_manager</span><span class="p">.</span><span class="nx">getData</span><span class="p">,</span><span class="nx">printData</span><span class="p">);</span>
<span class="nx">scheduler</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">(</span><span class="nx">api_manager</span><span class="p">.</span><span class="nx">getMoreData</span><span class="p">,</span><span class="nx">printData</span><span class="p">);</span>
<span class="nx">scheduler</span><span class="p">.</span><span class="nx">enqueue</span><span class="p">(</span><span class="nx">api_manager</span><span class="p">.</span><span class="nx">getOtherData</span><span class="p">,</span><span class="nx">printData</span><span class="p">);</span>

</pre></div>

<h3>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>TODO</h3>

<p>This is just the first structure.</p>

<ol>
<li>Tests</li>
<li>Validations. What happens if you enqueue something that is not a function?</li>
<li>Error handling. What happens if your function crashes?</li>
<li>Functinality to get statistics:

<ol>
<li>When will a function be executed?</li>
<li>How many elements are in the queue?</li>
</ol>
</li>
<li>More funcionalities

<ol>
<li>Priorities</li>
<li>Remove enqueued function</li>
<li>Change execution interval</li>
<li>Change execution interval</li>
</ol>
</li>
<li>NPM publish</li>
</ol>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Scheduler maintained by <a href="https://github.com/efueyo">efueyo</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
